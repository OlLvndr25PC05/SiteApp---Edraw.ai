/*! For license information please see main.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.edAiAuth=t():e.edAiAuth=t()}(self,(()=>(()=>{"use strict";var e={662:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),o=n.n(r),a=n(314),i=n.n(a)()(o());i.push([e.id,".edrawai-auth {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.6);\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    z-index: 9999;\n    visibility: hidden;\n}\n\n.edrawai-auth--wraper {\n    position: relative;\n    background: #fff;\n    width: 405px;\n    height: 666px;\n    border-radius: 12px;\n    overflow: hidden;\n}\n\n.edrawai-auth--wraper__mobile {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n}\n\n.edrawai-auth--close {\n    position: absolute;\n    top: 0;\n    right: 0;\n    box-sizing: content-box;\n    padding: 10px;\n    width: 15px;\n    height: 15px;\n    cursor: pointer;\n}\n\n.edrawai-auth--close__mobile {\n    width: 25px;\n    height: 25px;\n}\n\n.edrawai-auth--frame {\n    width: 100%;\n    height: 100%;\n}",""]);const s=i},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var d=0;d<e.length;d++){var u=[].concat(e[d]);r&&i[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},i=[],s=0;s<e.length;s++){var c=e[s],d=r.base?c[0]+r.base:c[0],u=a[d]||0,l="".concat(d," ").concat(u);a[d]=u+1;var p=n(l),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var f=o(h,r);r.byIndex=s,t.splice(s,0,{identifier:l,updater:f,references:1})}i.push(l)}return i}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=n(a[i]);t[s].references--}for(var c=r(e,o),d=0;d<a.length;d++){var u=n(a[d]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=c}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var r={};function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}n.d(r,{default:()=>M});var a=function e(t,n){function r(e,r,a){if("undefined"!=typeof document){"number"==typeof(a=o({},n,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in a)a[s]&&(i+="; "+s,!0!==a[s]&&(i+="="+a[s].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var a=n[o].split("="),i=a.slice(1).join("=");try{var s=decodeURIComponent(a[0]);if(r[s]=t.read(i,s),e===s)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",o({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,o({},this.attributes,t))},withConverter:function(t){return e(o({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function i(e,t){var n=document.getElementsByTagName("head")[0],r=document.createElement("script");t||(t=function(){}),r.addEventListener("load",t,!1),r.src=e,n.appendChild(r)}var s=n(72),c=n.n(s),d=n(825),u=n.n(d),l=n(659),p=n.n(l),h=n(56),f=n.n(h),m=n(540),v=n.n(m),w=n(113),g=n.n(w),y=n(662),b={};b.styleTagTransform=g(),b.setAttributes=f(),b.insert=p().bind(null,"head"),b.domAPI=u(),b.insertStyleElement=v(),c()(y.A,b),y.A&&y.A.locals&&y.A.locals;let x=new URLSearchParams(location.search.substr(1)).get("auth_code"),_=!1,k="c1559ed92a1f0305996dba09d1aeaa27",C="EN",E="en-us",A=20032,O="https://www.edraw.ai/app/callback.html",I="https://api.edraw.ai/api/";const j={trident:(P=navigator.userAgent).indexOf("Trident")>-1,presto:P.indexOf("Presto")>-1,webKit:P.indexOf("AppleWebKit")>-1,gecko:P.indexOf("Gecko")>-1&&-1==P.indexOf("KHTML"),mobile:!!P.match(/AppleWebKit.*Mobile.*/),ios:!!P.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:P.indexOf("Android")>-1||P.indexOf("Linux")>-1,iPhone:P.indexOf("iPhone")>-1,iPad:P.indexOf("iPad")>-1,webApp:-1==P.indexOf("Safari"),weixin:P.indexOf("MicroMessenger")>-1,qq:" qq"==P.match(/\sQQ/i)};var P;const T=j.mobile||j.android||j.ios,S="edrawai-authorization";function z(e){let t,n,r,o;"object"==typeof e?(t=e.language,n=e.product,r=e.inviter,o=e.node_limit_inviter):"string"==typeof e&&(t=e);let a=document.getElementById(S);if(a)return void(a.style.visibility="visible");let i=document.createElement("div");i.setAttribute("id",S),i.className="edrawai-auth",t&&(C=t),n&&(A=n),i.innerHTML=function({lang:e}){if(e)switch(e.toLowerCase()){case"cn":case"zh":E="zh-cn";break;case"tw":E="zh-tw";break;case"jp":E="ja-jp";break;case"de":E="de-de";break;case"fr":E="fr-fr";break;case"es":E="es-es";break;case"it":E="it-it";break;case"pt":E="pt-br";break;case"kr":case"ko":E="ko-kr";break;default:E="en-us"}return`\n    <div class="edrawai-auth--wraper" id='edrawai-authorization--wrapper'>\n        <svg class="edrawai-auth--close" id='edrawai-authorization--close' xmlns="http://www.w3.org/2000/svg"\n            xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1024 1024" width="200" height="200">\n            <path\n                d="M521.693867 449.297067L111.4112 39.0144a51.2 51.2 0 1 0-72.430933 72.362667l410.282666 410.3168-410.282666 410.3168a51.2 51.2 0 1 0 72.3968 72.3968l410.3168-410.282667 410.3168 410.282667a51.2 51.2 0 1 0 72.3968-72.362667l-410.282667-410.350933 410.282667-410.282667a51.2 51.2 0 1 0-72.3968-72.3968l-410.282667 410.282667z"\n                fill="#515151" />\n        </svg>\n        <iframe src="${"https://accounts.wondershare.com/v3/user/oauth-client/authorize?app_key="+k+"&redirect_uri="+O+"&response_type=code&scope=user&state=10000"+`&product_id=${A}&source=103`+`&lang=${E}&mode=1&verify=no`}" class='edrawai-auth--frame' frameborder="0"></iframe>\n    </div>\n`}({lang:C,product:n,inviter:r,node_limit_inviter:o}),document.body.appendChild(i);let s=document.getElementById("edrawai-authorization--close");s.addEventListener("click",(()=>{i.style.visibility="hidden"}));let c=document.getElementById("edrawai-authorization--wrapper");T&&(c.classList.add("edrawai-auth--wraper__mobile"),s.classList.add("edrawai-auth--close__mobile"))}function D(e){let t;var n=e.refresh_token.split(".")[1];n=JSON.parse(window.atob(n)).exp,t=new Date(1e3*n),e.islogin="true",a.set("EDCurrent",JSON.stringify(e),{expires:t})}function L(){return new Promise(((e,t)=>{let n=a.get("EDCurrent");if(n){n=JSON.parse(n),n.user_id;let r=n.token;fetch(`${I}user/base/info?ext=1`,{method:"GET",headers:{Authorization:`Bearer ${r}`}}).then((e=>e.json())).then((r=>{const{data:o}=r;0==r.code?e({...n,...o}):(a.remove("EDCurrent"),t())})).catch((()=>{t()}))}else t()}))}function U(){/(edraw.ai)/.test(location.host)&&i("https://dc-static.wondershare.cc/account_center/google-sdk.js",(()=>{let e="https://accounts.wondershare.com/v3/user/oauth-client/authorize?app_key="+k+`&redirect_uri=${encodeURIComponent(O+`?redirect=${encodeURIComponent(location.href)}`)}&response_type=code&scope=user&state=10000`+`&product_id=${A}&source=103`+`&lang=${E}&mode=1&verify=no`,t=e;document.addEventListener("onetapNodisplay",(()=>{i(`https://www.edrawsoft.com/assets/js/register.js?source=103&redirect_uri=${encodeURIComponent(O+`?redirect=${encodeURIComponent(location.href)}`)}`)})),window.loadDom&&window.loadDom(e,t,"499842837879-cnaa0jfuivlc73bqpnqasnolviotfe7v.apps.googleusercontent.com")}))}function $(e){return new Promise(((t,n)=>{let r=e||a.get("EDCurrent")&&JSON.parse(a.get("EDCurrent"));if(r){let e=r.refresh_token,o=r.token,i=new FormData;i.append("refresh_token",e),fetch(`${I}user/ws/account/refresh/token`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:i}).then((e=>e.json())).then((e=>{const{data:o}=e;o?(r.token=o.token,r.refresh_token=o.refresh_token,D(r),t(r)):(a.remove("EDCurrent"),n())})).catch((()=>{n()}))}else n()}))}const M={checkLocalCookie(e={}){const{product:t}=e;return t&&(A=t),new Promise(((e,t)=>{x?function(e){let{code:t}=e,n=new FormData;return n.append("code",t),n.append("from","web"),n.append("pid",A),new Promise(((e,t)=>{fetch("https://api.edraw.ai/api/user/ws/wscode/login",{method:"POST",body:n,redirect:"follow"}).then((e=>e.json())).then((n=>{"success"==n.status?e(n.data):t()})).catch((()=>t()))}))}({code:x}).then((t=>{D(t),history.replaceState(history.state,"",location.href.replace(/[?|&]auth_code=.[^&]*/,"")),L().then((e=>{e&&(t=e)})).finally((()=>{e(t)}))})).catch((()=>{U(),t()})):L().then((t=>{e(t)})).catch((()=>{$().then((t=>{e(t)})).catch((()=>{U(),t()}))}))}))},auth(e,t,n){_||(_=!0,function(e,t){window.addEventListener("message",(n=>{console.log("message type: "+n.type);let r=n.data;if(r)if("edrawai_auth_succeed"===r.type){let t=r.userInfo;D(t),L().then((e=>{e&&(t=e)})).finally((()=>{e&&e(t),document.getElementById(S).style.visibility="hidden"}))}else if("show_edrawai_auth"===r.type)document.getElementById(S).style.visibility="visible",t&&t();else if("edrawai_auth_mobile_third"===r.type){let e=r.url;location.href=e}else"edrawai_auth_ask_host"===r.type&&function(e){document.getElementById(S).getElementsByTagName("iframe")[0].contentWindow.postMessage(e,"*")}({type:"edrawai_auth_answer_host",host:location.host})}))}(e,t),z(n))},show(e={}){const{product:t}=e;t&&(A=t),new Promise(((e,t)=>{if(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))e(!1);else{let t=document.createElement("iframe"),n=!1,r=()=>{document.body.contains(t)&&(document.body.removeChild(t),r=null)};window.addEventListener("message",(function t(o){if("3pc.supported"===o.data||"3pc.unsupported"===o.data){let a="3pc.supported"===o.data;n=!0,e(a),r&&r(),window.removeEventListener("message",t)}}),!1),t.id="3pc",t.src="https://accounts.wondershare.com/web/cookie-check",t.style.display="none",t.style.position="fixed",document.body.appendChild(t),setTimeout((function(){n||(e(!0),r&&r())}),5e3)}})).then((e=>{e?z():function(e=0){let t="https://accounts.wondershare.com/v3/user/oauth-client/authorize?app_key="+k+`&redirect_uri=${O}?redirect=${location.href}&response_type=code&scope=user&state=10000`+`&product_id=${A}&source=103`+`&lang=${E}&mode=1&verify=no&remember_login=2`;e&&(t+="&goto=1"),location.href=t}()}))},logout:()=>a.get("EDCurrent")?(a.remove("EDCurrent"),new Promise(((e,t)=>{location.href="https://accounts.wondershare.com/v3/user/oauth/logout?redirect="+encodeURIComponent(location.href),e()}))):Promise.resolve(),getFreshToken:$};return r.default})()));